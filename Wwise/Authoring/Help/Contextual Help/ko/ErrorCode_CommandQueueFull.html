<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Audio command queue is full, blocking caller. Reduce number of calls to sound engine or boost command queue memory.</title><link rel="stylesheet" type="text/css" href="style_ko.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.2"><link rel="home" href="index.html" title="Wwise 콘텍스트 도움말"><link rel="up" href="common_errors_reported_in_capture_log.html" title="Capture Log에서 보고하는 오류"><link rel="prev" href="ErrorCode_CommandTooLarge.html" title="Audio command is too large to fit in the command queue. Break the command in smaller pieces."><link rel="next" href="ErrorCode_ChannelConfigRequestDenied.html" title="Audio Device could not honor the channel config requested with AkOutputSettings; default config will be used."></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="sect3"><div class="titlepage"><div><div><h4 class="title">Audio command queue is full, blocking caller.  Reduce number of calls to sound engine or boost command queue memory. </h4></div></div></div><p>오디오 명령 대기열은 게임에서 오는 모든 API 호출을 내부 사운드 엔진에 전달하는 장치입니다. Performance Monitor 뷰에서는 메모리 버퍼를 모니터링할 수 있습니다. 이 버퍼가 명령어로 가득 차면 또 다른 명령어를 추가하려고 하는 게임 스레드를 일시적으로 차단하게 됩니다. 이 작업은 API 호출 분실을 방지하기 위함인데, API 호출이 분실될 경우 게임과 사운드 엔진 간에 동기화 문제를 야기할 수 있기 때문입니다. 하지만 이 작업은 게임 프레임레이트에 문제를 일으킬 수 있습니다.</p><div class="itemizedlist"><p class="title"><b>유력한 원인:</b></p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>한 게임 프레임에 너무 많은 API 호출이 일어납니다. 이 원인은 해당 오류를 일으키는 가장 주된 원인입니다. 보통 <a class="link" href="https://www.audiokinetic.com/library/edge/?source=SDK&amp;id=namespace_a_k_1_1_sound_engine_a789e25bda32d1e11849afb6584942455.html" target="_blank"> <code class="code">SetPosition</code></a>, <a class="link" href="https://www.audiokinetic.com/library/edge/?source=SDK&amp;id=class_a_k_1_1_i_ak_global_plugin_context_afd9075833fd9d0d4f3ef1b011f832fe3.html" target="_blank"> <code class="code">SetRTPCValue</code></a>, <a class="link" href="https://www.audiokinetic.com/library/edge/?source=SDK&amp;id=namespace_a_k_1_1_sound_engine_a9c9d57ba7b3af2b896e26297a7657264.html" target="_blank"> <code class="code">SetSwitch</code></a>로의 중복 호출과 같은 것이 주된 원인입니다. 또한 이 오류는 '레벨'을 설정하거나, 수많은 Game Object를 만들거나, 실제 게임 처리가 시작하기 전에 Game Object의 위치와 RTPC를 설정할 경우에도 일어납니다.</p></li><li class="listitem"><p>매개 변수 배열에 큰 숫자가 있는 메모리 소비량이 많은 API 호출이 일어났습니다 (예: Spatial Audio의 <a class="link" href="https://www.audiokinetic.com/library/edge/?source=SDK&amp;id=ak__soundengine__setmultiplepositions.html" target="_blank"> <code class="code">SetMultiplePositions</code></a>이나 지오메트리 호출).</p></li><li class="listitem"><p>오디오 처리 스레드가 아주 바빠서 명령어 처리가 방지됩니다. 이 경우 이 오류와 함께 Voice Starvation 오류가 함께 일어나게 됩니다.</p></li><li class="listitem"><p>오디오 처리 스레드가 차단되거나 교착되었습니다. 이 오류는 게임이나 Wwise 자체의 버그를 표시합니다.</p></li></ul></div><div class="itemizedlist"><p class="title"><b>권장 해결 단계:</b></p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="">Profiler Settings</a>(Alt-G)에서 <span class="bold"><strong>API Calls</strong></span>을 활성화하여 게임이 수행하는 API 호출을 프로파일링하세요. 이렇게 하면 어떤 게임 처리가 API 호출로 명령 대기열을 지나치게 채우고 있는지 식별해낼 수 있습니다.</p></li><li class="listitem"><p>Wwise에서 게임이 Game Sync (State, Switch, Game Parameter)를 업데이트하는 방식을 확인해보세요. 아주 필요할 때에만 Game Sync를 업데이트하세요.</p></li><li class="listitem"><p><a class="link" href="https://www.audiokinetic.com/library/edge/?source=SDK&amp;id=namespace_a_k_1_1_sound_engine_afe54af0f5be38be061e8a3c7d7642bb1.html" target="_blank"> <code class="code">AK::SoundEngine::RenderAudio</code></a>에 게임 프레임 내 호출(intra-game-frame call)을 추가해서 한 게임 프레임을 여러 개의 오디오 프레임으로 나누세요. RenderAudio는 게임 프레임과 관련된 API 호출 집합의 끝 부분만 표시합니다. RenderAudio는 내부 사운드 엔진의 상태를 업데이트하기 위해 Audio 명령 대기열 처리를 유발하는데, 사실 이 기능 호출에 의해 실제로 오디오가 렌더링되지 않습니다.</p></li><li class="listitem"><p>오디오 처리 스레드 (<code class="code">AK::EventMgrThread</code>라고 이름이 지정되어 있지만 <code class="code">AkPlatformInitSettings::threadLEngine</code>에 의해 우선 순위가 설정됨)가 처리하기에 충분히 높은 CPU 우선 순위를 가지는지 확인하세요. 이 사항이 문제였을 경우 게임에 'Voice Starvation' 오류 또한 일어나게 됩니다.</p></li><li class="listitem"><p>디버거를 게임에 연결해서 <code class="code">AK::EventMgrThread</code> 스레드가 실제로 실행되고 있는지 검토하세요. 실행되지 않을 경우 이미 게임이 모든 사운드를 잃었을 것입니다. 이 경우 Audiokinetic 지원팀에 연락해주세요.</p></li><li class="listitem"><p>명령 대기열 메모리 크기를 늘리세요. <a class="link" href="https://www.audiokinetic.com/library/edge/?source=SDK&amp;id=struct_ak_init_settings_afd6ada0769c6316e7950961c38cc09d0.html#afd6ada0769c6316e7950961c38cc09d0" target="_blank">AkInitSettings::uCommandQueueSize</a>를 참고하세요.</p></li></ul></div><div class="itemizedlist"><p class="title"><b>추가 참고</b></p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> <a class="link" href="https://www.audiokinetic.com/library/edge/?source=Help&amp;id=monitoring_and_troubleshooting_with_performance_monitor" target="_blank">Performance Monitor 사용한 모니터링 및 문제 해결</a> </p></li><li class="listitem"><p> <a class="xref" href="">???</a> </p></li></ul></div></div></body></html>
